<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    function ArrayList() {
        this.array = [];
        ArrayList.prototype.insert = function (item) {
            this.array.push(item)
        }
        ArrayList.prototype.toString = function () {
            return this.array.join(' ')
        }
        //交换数组两个值
        ArrayList.prototype.swap = function (m, n) {
            var temp = this.array[m];
            this.array[m] = this.array[n];
            this.array[n] = temp
        }
        //冒泡
        ArrayList.prototype.bubbleSort = function () {
            var length = this.array.length
            //外层循环控制冒泡的范围
            // for(var j =length-1;j>=0;j--){
            //     //冒泡范围内一一对比找出最大值，从而交换到最后
            //     for(var i =0;i<j;i++){
            //         if(this.array[i]>this.array[i+1]){
            //             this.swap(i,i+1)
            //         }
            //     }
            for (var i = 0; i < length - 1; i++) {
                for (var j = 0; j < length - i - 1; j++) {
                    if (this.array[j] > this.array[j + 1]) {
                        this.swap(j, j + 1)
                    }
                }
            }
        }
        //选择 
        ArrayList.prototype.selectionSort = function () {
            var length = this.array.length;
            //从第一个开始循环直到最后一个
            for (var i = 0; i < length - 1; i++) {
                var min = i;
                for (var j = min + 1; j < length; j++) {
                    if (this.array[min] > this.array[j]) {
                        min = j
                    }
                }
                this.swap(min, i)
            }
        }
        //插入
        ArrayList.prototype.insertSort = function () {
            var length = this.array.length;
            for (var i = 1; i < length; i++) {
                var temp = this.array[i]
                //比较前面的元素
                var j = i;
                while (j > 0 && this.array[j - 1] > temp) {
                    this.array[j] = this.array[j - 1];
                    j--;
                }
                this.array[j] = temp;
            }
        }
        //希尔排序
        ArrayList.prototype.shellSort = function () {
            // 1.获取数组的长度
            var length = this.array.length
            // 2.根据长度计算增量
            var gap = Math.floor(length / 2)
            // 3.增量不断变量小, 大于0就继续排序
            while (gap > 0) {
                // 4.实现插入排序
                for (var i = gap; i < length; i++) {
                    // 4.1.保存临时变量
                    var j = i
                    var temp = this.array[i]
                    // 4.2.插入排序的内层循环
                    while (j > gap - 1 && this.array[j - gap] > temp) {
                        this.array[j] = this.array[j - gap]
                        j -= gap
                    }
                    // 4.3.将选出的j位置设置为temp
                    this.array[j] = temp
                }
                // 5.重新计算新的间隔
                gap = Math.floor(gap / 2)
            }
        }
        //快速快速
        // 选择枢纽
        ArrayList.prototype.median = function (left, right) {
            // 1.求出中间的位置
            var center = Math.floor((left + right) / 2)
            // 2.判断并且进行交换  中位数的时候应该按照左中->左右->中右
            if (this.array[left] > this.array[center]) {
                this.swap(left, center)
            }
            if (this.array[center] > this.array[right]) {
                this.swap(center, right)
            }
            if (this.array[left] > this.array[center]) {
                this.swap(left, center)
            }
           
            // 3.巧妙的操作: 将center移动到right - 1的位置.
            this.swap(center, right - 1)
            // 4.返回pivot
            return this.array[right - 1]
        }
        // 快速排序实现
        ArrayList.prototype.quickSort = function () {
            this.quickSortRec(0, this.array.length - 1)
        }
        ArrayList.prototype.quickSortRec = function (left, right) {
            // 0.递归结束条件
            if (left >= right) return
            // 1.获取枢纽
            var pivot = this.median(left, right)
            // 2.开始进行交换
            // 2.1.记录左边开始位置和右边开始位置
            var i = left
            var j = right - 1
            // 2.2.循环查找位置   最后排序两个或三个数的时候已经在寻找中位数的过程中排好序了
            while (true &&i<j) {
                while (this.array[++i] < pivot) {}
                while (this.array[--j] > pivot) {}
                if (i < j) {
                    // 2.3.交换两个数值
                    this.swap(i, j)
                } else {
                    // 2.4.当i<j的时候(一定不会=, 看下面解释中的序号3), 停止循环因为两边已经找到了相同的位置
                    break
                }
            }
            // 3.将枢纽放在正确的位置
            this.swap(i, right - 1)
            // 4.递归调用左边
            this.quickSortRec(left, i - 1)
            this.quickSortRec(i + 1, right)
        }
    }

    var list = new ArrayList();
    list.insert(1)
    list.insert(66)
    list.insert(88)
    list.insert(73)
    list.insert(21)
    list.insert(110)
    list.insert(7)
    list.insert(19)
    list.insert(23)
    list.insert(13)
    list.quickSort()
    console.log(list.toString())
    //快速排序
    // let arr = [145, 248, 31, 45, 9, 11, 145, 300];

    // function arrSort(arr) {
    //     if (arr.length <= 1) {
    //         return arr
    //     };
    //     var pivotIndex = Math.floor(arr.length / 2);
    //     var pivot = arr.splice(pivotIndex, 1)[0]; //取出中间的数字，比如第一次就取出9
    //     var left = [];
    //     var right = [];
    //     for (var i = 0; i < arr.length; i++) {
    //         if (arr[i] < pivot) { //第一次运算，如果小于9就进入左数组，大于就进入右数组
    //             left.push(arr[i]);
    //         } else {
    //             right.push(arr[i]);
    //         }
    //     }
    //     return arrSort(left).concat([pivot], arrSort(right)); //递归，再把左数组分成两半进行排序，右数组同理。
    // }
    // console.log(arrSort(arr));
</script>

</html>